@layer components {

  :root {
    /* button roles */
    --sp-component-button-border-base: var(--sp-component-button-ghost-bg);
    --sp-component-button-shadow: var(--sp-shadow-sm);
    --sp-component-button-primary-bg: var(--sp-button-primary-bg);
    --sp-component-button-primary-bg-hover: var(--sp-button-primary-bghover);
    --sp-component-button-primary-bg-active: var(--sp-button-primary-bgactive);
    --sp-component-button-primary-bg-disabled: var(--sp-button-primary-bgdisabled);
    --sp-component-button-primary-text: var(--sp-button-primary-text);
    --sp-component-button-primary-text-disabled: var(--sp-button-primary-textdisabled);
    --sp-component-button-secondary-bg: var(--sp-button-secondary-bg);
    --sp-component-button-secondary-bg-hover: var(--sp-button-secondary-bghover);
    --sp-component-button-secondary-bg-active: var(--sp-button-secondary-bgactive);
    --sp-component-button-secondary-bg-disabled: var(--sp-button-secondary-bgdisabled);
    --sp-component-button-secondary-text: var(--sp-button-secondary-text);
    --sp-component-button-secondary-text-disabled: var(--sp-button-secondary-textdisabled);
    --sp-component-button-secondary-border: var(--sp-button-secondary-border);
    --sp-component-button-secondary-border-disabled: var(--sp-button-secondary-borderdisabled);
    --sp-component-button-ghost-bg: var(--sp-button-ghost-bg);
    --sp-component-button-ghost-bg-hover: var(--sp-button-ghost-bghover);
    --sp-component-button-ghost-bg-active: var(--sp-button-ghost-bgactive);
    --sp-component-button-ghost-bg-disabled: var(--sp-button-ghost-bgdisabled);
    --sp-component-button-ghost-text: var(--sp-button-ghost-text);
    --sp-component-button-ghost-text-disabled: var(--sp-button-ghost-textdisabled);
    --sp-component-button-danger-bg: var(--sp-button-danger-bg);
    --sp-component-button-danger-bg-hover: var(--sp-button-danger-bghover);
    --sp-component-button-danger-bg-active: var(--sp-button-danger-bgactive);
    --sp-component-button-danger-bg-disabled: var(--sp-button-danger-bgdisabled);
    --sp-component-button-danger-text: var(--sp-button-danger-text);
    --sp-component-button-danger-text-disabled: var(--sp-button-danger-textdisabled);
    --sp-component-button-success-bg: var(--sp-button-success-bg);
    --sp-component-button-success-bg-hover: var(--sp-button-success-bghover);
    --sp-component-button-success-bg-active: var(--sp-button-success-bgactive);
    --sp-component-button-success-bg-disabled: var(--sp-button-success-bgdisabled);
    --sp-component-button-success-text: var(--sp-button-success-text);
    --sp-component-button-success-text-disabled: var(--sp-button-success-textdisabled);

    /* card roles */
    --sp-component-card-bg: var(--sp-surface-card);
    --sp-component-card-text: var(--sp-text-on-surface-default);
    --sp-component-card-text-muted: var(--sp-text-on-surface-muted);
    --sp-component-card-border: var(--sp-color-neutral-200);
    --sp-component-card-border-base: var(--sp-component-card-ghost-border);
    --sp-component-card-shadow: var(--sp-shadow-sm);
    --sp-component-card-shadow-elevated: var(--sp-shadow-lg);
    --sp-component-card-shadow-flat: var(--sp-shadow-none);
    --sp-component-card-shadow-outline: var(--sp-shadow-none);
    --sp-component-card-shadow-ghost: var(--sp-shadow-none);
    --sp-component-card-outline-bg: var(--sp-component-card-bg);
    --sp-component-card-outline-border: var(--sp-component-card-border);
    --sp-component-card-ghost-bg: var(--sp-component-button-ghost-bg);
    --sp-component-card-ghost-border: var(--sp-component-card-ghost-bg);

    /* input roles */
    --sp-component-input-role-border: var(--sp-form-default-border);
    --sp-component-input-role-bg: var(--sp-form-default-bg);
    --sp-component-input-role-text: var(--sp-form-default-text);
    --sp-component-input-role-placeholder: var(--sp-form-default-placeholder);
    --sp-component-input-role-border-focus: var(--sp-form-focus-border);
    --sp-component-input-role-ring: var(--sp-form-focus-ring);
    --sp-component-input-role-border-error: var(--sp-form-invalid-border);
    --sp-component-input-role-bg-error: var(--sp-form-invalid-bg);
    --sp-component-input-role-text-error: var(--sp-form-invalid-text);
    --sp-component-input-role-border-success: var(--sp-form-valid-border);
    --sp-component-input-role-bg-success: var(--sp-form-valid-bg);
    --sp-component-input-role-text-success: var(--sp-form-valid-text);
    --sp-component-input-role-bg-disabled: var(--sp-form-disabled-bg);
    --sp-component-input-role-text-disabled: var(--sp-form-disabled-text);
    --sp-component-input-role-border-disabled: var(--sp-form-disabled-border);

    /* badge roles */
    --sp-component-badge-font: var(--sp-font-family-sans);
    --sp-component-badge-weight: var(--sp-font-sm-weight);
    --sp-component-badge-gap: var(--sp-space-4);
    --sp-component-badge-radius: var(--sp-radius-pill);
    --sp-component-badge-primary-bg: var(--sp-button-primary-bg);
    --sp-component-badge-primary-text: var(--sp-button-text-on-primary);
    --sp-component-badge-success-bg: var(--sp-badge-success-bg);
    --sp-component-badge-success-text: var(--sp-badge-success-text);
    --sp-component-badge-warning-bg: var(--sp-badge-warning-bg);
    --sp-component-badge-warning-text: var(--sp-badge-warning-text);
    --sp-component-badge-danger-bg: var(--sp-badge-danger-bg);
    --sp-component-badge-danger-text: var(--sp-badge-danger-text);
    --sp-component-badge-padding-x-sm: var(--sp-space-8);
    --sp-component-badge-padding-x-md: var(--sp-space-12);
    --sp-component-badge-padding-x-lg: var(--sp-space-16);
    --sp-component-badge-padding-y-sm: var(--sp-space-4);
    --sp-component-badge-padding-y-md: var(--sp-space-4);
    --sp-component-badge-padding-y-lg: var(--sp-space-4);

    /* icon box roles */
    --sp-component-iconbox-radius: var(--sp-radius-lg);
    --sp-component-iconbox-size-sm: var(--sp-space-32);
    --sp-component-iconbox-size-md: var(--sp-space-48);
    --sp-component-iconbox-size-lg: var(--sp-space-64);
    --sp-component-iconbox-primary-bg: var(--sp-color-brand-50);
    --sp-component-iconbox-primary-text: var(--sp-icon-box-icon-default);
    --sp-component-iconbox-success-bg: var(--sp-color-success-50);
    --sp-component-iconbox-success-text: var(--sp-icon-box-icon-success);
    --sp-component-iconbox-warning-bg: var(--sp-color-warning-50);
    --sp-component-iconbox-warning-text: var(--sp-icon-box-icon-warning);
    --sp-component-iconbox-danger-bg: var(--sp-color-error-50);
    --sp-component-iconbox-danger-text: var(--sp-icon-box-icon-danger);
    --sp-component-iconbox-info-bg: var(--sp-color-info-50);
    --sp-component-iconbox-info-text: var(--sp-badge-info-text);
  }

  /* BUTTONS -------------------------------------------------------------- */
  .sp-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--sp-space-4);
    padding: var(--sp-space-4) var(--sp-space-16);
    border-radius: var(--sp-radius-md);
    border: 1px solid var(--sp-component-button-border-base);
    font-family: var(--sp-font-family-sans);
    font-size: var(--sp-font-md-size);
    line-height: 1;
    font-weight: var(--sp-font-md-weight);
    text-decoration: none;
    appearance: none;
    transition:
      background-color var(--sp-duration-fast) var(--sp-easing-out),
      color var(--sp-duration-fast) var(--sp-easing-out),
      box-shadow var(--sp-duration-fast) var(--sp-easing-out),
      border-color var(--sp-duration-fast) var(--sp-easing-out);
    cursor: pointer;
    min-height: var(--sp-min-touch-target);
  }

  .sp-btn:disabled,
  .sp-btn[aria-disabled="true"],
  .sp-btn.sp-btn--disabled {
    cursor: not-allowed;
    opacity: var(--sp-opacity-disabled);
    pointer-events: none;
  }

  .sp-btn--loading {
    pointer-events: none;
    opacity: var(--sp-opacity-active);
  }

  .sp-btn--full {
    width: 100%;
  }

  .sp-btn--icon {
    padding-inline: var(--sp-space-12);
    padding-block: var(--sp-space-4);
  }

  /* sizes */
  .sp-btn--sm {
    padding: var(--sp-space-4) var(--sp-space-12);
    font-size: var(--sp-font-sm-size);
    line-height: var(--sp-font-sm-line-height);
  }

  .sp-btn--md {
    padding: var(--sp-space-4) var(--sp-space-16);
    font-size: var(--sp-font-md-size);
    line-height: var(--sp-font-md-line-height);
  }

  .sp-btn--lg {
    padding: var(--sp-space-8) var(--sp-space-24);
    font-size: var(--sp-font-lg-size);
    line-height: var(--sp-font-lg-line-height);
  }

  /* Generic forced-state helpers (safe, variant rules still set actual colors) */
  .sp-btn.sp-btn--hover,
  .sp-btn.is-hover {
    /* no-op here; variant sections below define the actual hover colors */
  }

  .sp-btn.sp-btn--active,
  .sp-btn.is-active {
    /* no-op here; variant sections below define the actual active colors */
  }

  /* primary */
  .sp-btn--primary {
    background-color: var(--sp-component-button-primary-bg);
    color: var(--sp-component-button-primary-text);
    box-shadow: var(--sp-component-button-shadow);
  }

  .sp-btn--primary.sp-btn--hover,
  .sp-btn--primary.is-hover,
  .sp-btn--primary:hover {
    background-color: var(--sp-component-button-primary-bg-hover);
  }

  .sp-btn--primary.sp-btn--active,
  .sp-btn--primary.is-active,
  .sp-btn--primary:active {
    background-color: var(--sp-component-button-primary-bg-active);
  }

  .sp-btn--primary.sp-btn--disabled,
  .sp-btn--primary:disabled {
    background-color: var(--sp-component-button-primary-bg-disabled);
    color: var(--sp-component-button-primary-text-disabled);
    box-shadow: none;
  }

  /* secondary */
  .sp-btn--secondary {
    background-color: var(--sp-component-button-secondary-bg);
    color: var(--sp-component-button-secondary-text);
    border-color: var(--sp-component-button-secondary-border);
  }

  .sp-btn--secondary.sp-btn--hover,
  .sp-btn--secondary.is-hover,
  .sp-btn--secondary:hover {
    background-color: var(--sp-component-button-secondary-bg-hover);
  }

  .sp-btn--secondary.sp-btn--active,
  .sp-btn--secondary.is-active,
  .sp-btn--secondary:active {
    background-color: var(--sp-component-button-secondary-bg-active);
  }

  .sp-btn--secondary.sp-btn--disabled,
  .sp-btn--secondary:disabled {
    background-color: var(--sp-component-button-secondary-bg-disabled);
    color: var(--sp-component-button-secondary-text-disabled);
    border-color: var(--sp-component-button-secondary-border-disabled);
  }

  /* ghost */
  .sp-btn--ghost {
    background-color: var(--sp-component-button-ghost-bg);
    color: var(--sp-component-button-ghost-text);
  }

  .sp-btn--ghost.sp-btn--hover,
  .sp-btn--ghost.is-hover,
  .sp-btn--ghost:hover {
    background-color: var(--sp-component-button-ghost-bg-hover);
  }

  .sp-btn--ghost.sp-btn--active,
  .sp-btn--ghost.is-active,
  .sp-btn--ghost:active {
    background-color: var(--sp-component-button-ghost-bg-active);
  }

  .sp-btn--ghost.sp-btn--disabled,
  .sp-btn--ghost:disabled {
    color: var(--sp-component-button-ghost-text-disabled);
    background-color: var(--sp-component-button-ghost-bg-disabled);
  }

  /* danger */
  .sp-btn--danger {
    background-color: var(--sp-component-button-danger-bg);
    color: var(--sp-component-button-danger-text);
  }

  .sp-btn--danger.sp-btn--hover,
  .sp-btn--danger.is-hover,
  .sp-btn--danger:hover {
    background-color: var(--sp-component-button-danger-bg-hover);
  }

  .sp-btn--danger.sp-btn--active,
  .sp-btn--danger.is-active,
  .sp-btn--danger:active {
    background-color: var(--sp-component-button-danger-bg-active);
  }

  .sp-btn--danger.sp-btn--disabled,
  .sp-btn--danger:disabled {
    background-color: var(--sp-component-button-danger-bg-disabled);
    color: var(--sp-component-button-danger-text-disabled);
  }

  /* success */
  .sp-btn--success {
    background-color: var(--sp-component-button-success-bg);
    color: var(--sp-component-button-success-text);
  }

  .sp-btn--success.sp-btn--hover,
  .sp-btn--success.is-hover,
  .sp-btn--success:hover {
    background-color: var(--sp-component-button-success-bg-hover);
  }

  .sp-btn--success.sp-btn--active,
  .sp-btn--success.is-active,
  .sp-btn--success:active {
    background-color: var(--sp-component-button-success-bg-active);
  }

  .sp-btn--success.sp-btn--disabled,
  .sp-btn--success:disabled {
    background-color: var(--sp-component-button-success-bg-disabled);
    color: var(--sp-component-button-success-text-disabled);
  }

  /* INPUTS --------------------------------------------------------------- */

  .sp-input-wrapper {
    display: grid;
    gap: var(--sp-space-4);
    width: 100%;
  }

  .sp-label {
    color: var(--sp-component-input-role-text);
    font-size: var(--sp-font-sm-size);
    font-weight: var(--sp-font-sm-weight);
    line-height: var(--sp-font-sm-line-height);
  }

  .sp-helper-text {
    color: var(--sp-text-on-surface-meta);
    font-size: var(--sp-font-xs-size);
    line-height: var(--sp-font-xs-line-height);
  }

  .sp-error-message {
    color: var(--sp-component-input-role-text-error);
    font-size: var(--sp-font-xs-size);
    line-height: var(--sp-font-xs-line-height);
  }

  .sp-input {
    width: 100%;
    display: block;
    appearance: none;
    padding: var(--sp-space-4) var(--sp-space-16);
    border-radius: var(--sp-radius-md);
    border: 1px solid var(--sp-component-input-role-border);
    background-color: var(--sp-component-input-role-bg);
    color: var(--sp-component-input-role-text);
    font-family: var(--sp-font-family-sans);
    font-size: var(--sp-font-md-size);
    line-height: var(--sp-font-md-line-height);
    transition:
      border-color var(--sp-duration-fast) var(--sp-easing-out),
      box-shadow var(--sp-duration-fast) var(--sp-easing-out),
      background-color var(--sp-duration-fast) var(--sp-easing-out);
  }

  .sp-input::placeholder {
    color: var(--sp-component-input-role-placeholder);
  }

  .sp-input--sm {
    padding: var(--sp-space-4) var(--sp-space-12);
    font-size: var(--sp-font-sm-size);
    line-height: var(--sp-font-sm-line-height);
  }

  .sp-input--md {
    padding: var(--sp-space-4) var(--sp-space-16);
    font-size: var(--sp-font-md-size);
    line-height: var(--sp-font-md-line-height);
  }

  .sp-input--lg {
    padding: var(--sp-space-8) var(--sp-space-24);
    font-size: var(--sp-font-lg-size);
    line-height: var(--sp-font-lg-line-height);
  }

  .sp-input--full {
    width: 100%;
  }

  .sp-input:focus,
  .sp-input--focus {
    border-color: var(--sp-component-input-role-border-focus);
    box-shadow: 0 0 0 calc(var(--sp-focus-ring-width) + 1px) var(--sp-component-input-role-ring);
    outline: none;
  }

  /* State styling should not force typed text to be red/green by default */
  .sp-input--error {
    border-color: var(--sp-component-input-role-border-error);
    background-color: var(--sp-component-input-role-bg-error);
    color: var(--sp-component-input-role-text);
  }

  .sp-input--success {
    border-color: var(--sp-component-input-role-border-success);
    background-color: var(--sp-component-input-role-bg-success);
    color: var(--sp-component-input-role-text);
  }

  .sp-input--disabled {
    background-color: var(--sp-component-input-role-bg-disabled);
    color: var(--sp-component-input-role-text-disabled);
    border-color: var(--sp-component-input-role-border-disabled);
    cursor: not-allowed;
  }

  .sp-input--disabled::placeholder {
    color: var(--sp-component-input-role-text-disabled);
  }

  .sp-input--disabled,
  .sp-input--disabled:focus {
    box-shadow: none;
  }

  /* CARDS ---------------------------------------------------------------- */

  .sp-card {
    background-color: var(--sp-component-card-bg);
    color: var(--sp-component-card-text);
    border-radius: var(--sp-radius-lg);
    padding: var(--sp-space-24);
    box-shadow: var(--sp-component-card-shadow);
    border: 1px solid var(--sp-component-card-border-base);
  }

  .sp-card p {
    color: var(--sp-component-card-text-muted);
  }

  .sp-card h3,
  .sp-card h4 {
    color: var(--sp-component-card-text);
  }

  .sp-card--elevated {
    box-shadow: var(--sp-component-card-shadow-elevated);
  }

  .sp-card--flat {
    box-shadow: var(--sp-component-card-shadow-flat);
    border-color: var(--sp-component-card-border);
  }

  .sp-card--outline {
    background-color: var(--sp-component-card-outline-bg);
    border-color: var(--sp-component-card-outline-border);
    box-shadow: var(--sp-component-card-shadow-outline);
  }

  .sp-card--ghost {
    background-color: var(--sp-component-card-ghost-bg);
    border-color: var(--sp-component-card-ghost-border);
    box-shadow: var(--sp-component-card-shadow-ghost);
  }

  .sp-card--padded {
    padding: var(--sp-space-32);
  }

  .sp-card--full {
    height: 100%;
  }

  .sp-card--interactive {
    cursor: pointer;
    transition:
      transform var(--sp-duration-fast) var(--sp-easing-out),
      box-shadow var(--sp-duration-fast) var(--sp-easing-out);
  }

  .sp-card--interactive:hover,
  .sp-card--interactive:focus-visible,
  .sp-card--interactive:focus-within {
    transform: translateY(-1px);
    box-shadow: var(--sp-component-card-shadow-elevated);
  }

  /* BADGES --------------------------------------------------------------- */

  .sp-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--sp-component-badge-gap);
    border-radius: var(--sp-component-badge-radius);
    font-family: var(--sp-component-badge-font);
    font-weight: var(--sp-component-badge-weight);
    padding: var(--sp-component-badge-padding-y-md) var(--sp-component-badge-padding-x-md);
    font-size: var(--sp-font-sm-size);
    line-height: var(--sp-font-sm-line-height);
    border: 1px solid transparent;
    white-space: nowrap;
  }

  .sp-badge--sm {
    padding: var(--sp-component-badge-padding-y-sm) var(--sp-component-badge-padding-x-sm);
    font-size: var(--sp-font-xs-size);
    line-height: var(--sp-font-xs-line-height);
  }

  .sp-badge--md {
    padding: var(--sp-component-badge-padding-y-md) var(--sp-component-badge-padding-x-md);
    font-size: var(--sp-font-sm-size);
    line-height: var(--sp-font-sm-line-height);
  }

  .sp-badge--lg {
    padding: var(--sp-component-badge-padding-y-lg) var(--sp-component-badge-padding-x-lg);
    font-size: var(--sp-font-md-size);
    line-height: var(--sp-font-md-line-height);
  }

  .sp-badge--primary {
    background-color: var(--sp-component-badge-primary-bg);
    color: var(--sp-component-badge-primary-text);
  }

  .sp-badge--success {
    background-color: var(--sp-component-badge-success-bg);
    color: var(--sp-component-badge-success-text);
  }

  .sp-badge--warning {
    background-color: var(--sp-component-badge-warning-bg);
    color: var(--sp-component-badge-warning-text);
  }

  .sp-badge--danger {
    background-color: var(--sp-component-badge-danger-bg);
    color: var(--sp-component-badge-danger-text);
  }

  /* ICON BOXES ----------------------------------------------------------- */

  .sp-iconbox {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--sp-component-iconbox-radius);
    color: var(--sp-component-iconbox-primary-text);
    background-color: var(--sp-component-iconbox-primary-bg);
    font-family: var(--sp-font-family-sans);
    font-weight: var(--sp-font-md-weight);
    line-height: 0;
  }

  /* Harden icon rendering:
     - center, no baseline wobble
     - force currentColor for common svg shapes
     - preserve stroke-only icons (fill="none")
  */
  .sp-iconbox,
  .sp-iconbox>i {
    line-height: 0;
  }

  .sp-iconbox>i {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1em;
    height: 1em;
    flex-shrink: 0;
    vertical-align: middle;
  }

  .sp-iconbox svg {
    display: block;
    width: 1em;
    height: 1em;
    flex-shrink: 0;
  }

  /* default to inheriting via currentColor */
  .sp-iconbox svg,
  .sp-iconbox svg path,
  .sp-iconbox svg circle,
  .sp-iconbox svg rect,
  .sp-iconbox svg line,
  .sp-iconbox svg polyline,
  .sp-iconbox svg polygon,
  .sp-iconbox svg g {
    stroke: currentColor;
  }

  /* only force fill when the icon isn't explicitly stroke-only */
  .sp-iconbox svg:not([fill="none"]),
  .sp-iconbox svg:not([fill="none"]) path,
  .sp-iconbox svg:not([fill="none"]) circle,
  .sp-iconbox svg:not([fill="none"]) rect,
  .sp-iconbox svg:not([fill="none"]) polygon {
    fill: currentColor;
  }

  .sp-iconbox--sm {
    width: var(--sp-component-iconbox-size-sm);
    height: var(--sp-component-iconbox-size-sm);
    font-size: var(--sp-font-sm-size);
  }

  .sp-iconbox--md {
    width: var(--sp-component-iconbox-size-md);
    height: var(--sp-component-iconbox-size-md);
    font-size: var(--sp-font-md-size);
  }

  .sp-iconbox--lg {
    width: var(--sp-component-iconbox-size-lg);
    height: var(--sp-component-iconbox-size-lg);
    font-size: var(--sp-font-lg-size);
  }

  .sp-iconbox--primary {
    background-color: var(--sp-component-iconbox-primary-bg);
    color: var(--sp-component-iconbox-primary-text);
  }

  .sp-iconbox--success {
    background-color: var(--sp-component-iconbox-success-bg);
    color: var(--sp-component-iconbox-success-text);
  }

  .sp-iconbox--warning {
    background-color: var(--sp-component-iconbox-warning-bg);
    color: var(--sp-component-iconbox-warning-text);
  }

  .sp-iconbox--danger {
    background-color: var(--sp-component-iconbox-danger-bg);
    color: var(--sp-component-iconbox-danger-text);
  }

  .sp-iconbox--info {
    background-color: var(--sp-component-iconbox-info-bg);
    color: var(--sp-component-iconbox-info-text);
  }
}
