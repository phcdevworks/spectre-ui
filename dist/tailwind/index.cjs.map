{"version":3,"sources":["../../src/tailwind/theme.ts","../../src/tailwind/preset.ts"],"names":[],"mappings":";;;AAkBO,SAAS,2BACd,OAAA,EACsB;AACtB,EAAA,MAAM,YAAA,GAAe;AAAA,IACnB,GAAI,OAAA,CAAQ,MAAA,IAAW,EAAC;AAAA,IACxB,GAAI,OAAA,CAAQ,SAAA,IAAa;AAAC,GAC5B;AAIA,EAAA,MAAM,CAAA,GAAS,YAAA;AAEf,EAAA,MAAM,SAAU,CAAA,CAAE,MAAA,IAAU,EAAE,KAAA,IAAS,CAAA,CAAE,WAAW,EAAC;AACrD,EAAA,MAAM,OAAA,GAAW,CAAA,CAAE,OAAA,IAAW,CAAA,CAAE,SAAS,EAAC;AAC1C,EAAA,MAAM,YAAA,GAAgB,CAAA,CAAE,KAAA,IAAS,CAAA,CAAE,UAAU,EAAC;AAC9C,EAAA,MAAM,SAAA,GAAa,CAAA,CAAE,OAAA,IAAW,CAAA,CAAE,UAAU,EAAC;AAC7C,EAAA,MAAM,aAAc,CAAA,CAAE,UAAA,EAAY,QAAA,IAAY,CAAA,CAAE,SAAS,EAAC;AAC1D,EAAA,MAAM,WAAY,CAAA,CAAE,UAAA,EAAY,KAAA,IAAS,CAAA,CAAE,YAAY,EAAC;AAExD,EAAA,MAAM,KAAA,GAAuB;AAAA,IAC3B,MAAA;AAAA,IACA,OAAA;AAAA,IACA,YAAA;AAAA,IACA,SAAA;AAAA,IACA,UAAA;AAAA,IACA;AAAA,GACF;AAEA,EAAA,OAAO,EAAE,KAAA,EAAM;AACjB;;;ACnCA,IAAM,aAAA,GAAgB,CAAC,KAAA,KACrB,OAAO,KAAA,KAAU,QAAA,IAAY,KAAA,KAAU,IAAA,IAAQ,CAAC,KAAA,CAAM,OAAA,CAAQ,KAAK,CAAA;AAGrE,IAAM,SAAA,GAAY,CAChB,IAAA,EACA,SAAA,KACM;AACN,EAAA,IAAI,CAAC,WAAW,OAAO,IAAA;AAEvB,EAAA,MAAM,MAAA,GAAkC,EAAE,GAAG,IAAA,EAAK;AAElD,EAAA,KAAA,MAAW,CAAC,GAAA,EAAK,aAAa,KAAK,MAAA,CAAO,OAAA,CAAQ,SAAS,CAAA,EAAG;AAC5D,IAAA,MAAM,SAAA,GAAY,OAAO,GAAG,CAAA;AAC5B,IAAA,IAAI,aAAA,CAAc,SAAS,CAAA,IAAK,aAAA,CAAc,aAAa,CAAA,EAAG;AAC5D,MAAA,MAAA,CAAO,GAAG,CAAA,GAAI,SAAA,CAAU,SAAA,EAAW,aAAa,CAAA;AAAA,IAClD,CAAA,MAAO;AACL,MAAA,MAAA,CAAO,GAAG,CAAA,GAAI,aAAA;AAAA,IAChB;AAAA,EACF;AAEA,EAAA,OAAO,MAAA;AACT,CAAA;AAEO,IAAM,2BAAA,GAA8B,CACzC,OAAA,KACmB;AACnB,EAAA,IAAI,CAAC,QAAQ,MAAA,EAAQ;AACnB,IAAA,MAAM,IAAI,KAAA;AAAA,MACR;AAAA,KACF;AAAA,EACF;AACA,EAAA,MAAM,EAAE,QAAO,GAAI,OAAA;AACnB,EAAA,MAAM,EAAE,KAAA,EAAM,GAAI,0BAAA,CAA2B,EAAE,QAAQ,CAAA;AACvD,EAAA,MAAM,WAAA,GAAc,SAAA;AAAA,IAClB,KAAA;AAAA,IACA,OAAA,CAAQ;AAAA,GACV;AAEA,EAAA,MAAM,UAAA,GAA6B;AAAA,IACjC,SAAS,EAAC;AAAA,IACV,KAAA,EAAO;AAAA;AAAA,GACT;AAEA,EAAA,OAAO,SAAA;AAAA,IACL,UAAA;AAAA,IACA,OAAA,CAAQ;AAAA,GACV;AACF","file":"index.cjs","sourcesContent":["import type { Config as TailwindConfig } from \"tailwindcss\";\nimport type { SpectreTokens } from \"../tokens\";\n\ntype TailwindTheme = NonNullable<TailwindConfig[\"theme\"]>;\n\nexport interface SpectreTailwindTheme {\n  theme: TailwindTheme;\n}\n\nexport interface CreateSpectreTailwindThemeOptions {\n  tokens: SpectreTokens;\n  overrides?: Partial<SpectreTokens>;\n}\n\n/**\n * Minimal, type-safe theme mapper.\n * Important: theme is NEVER undefined (fixes exactOptionalPropertyTypes + DTS).\n */\nexport function createSpectreTailwindTheme(\n  options: CreateSpectreTailwindThemeOptions\n): SpectreTailwindTheme {\n  const mergedTokens = {\n    ...(options.tokens ?? ({} as SpectreTokens)),\n    ...(options.overrides ?? {}),\n  } as SpectreTokens;\n\n  // We keep mapping shallow + permissive because token shapes will evolve.\n  // Tailwind accepts nested objects of strings for colors.\n  const t: any = mergedTokens;\n\n  const colors = (t.colors ?? t.color ?? t.palette ?? {}) as Record<string, any>;\n  const spacing = (t.spacing ?? t.space ?? {}) as Record<string, any>;\n  const borderRadius = (t.radii ?? t.radius ?? {}) as Record<string, any>;\n  const boxShadow = (t.shadows ?? t.shadow ?? {}) as Record<string, any>;\n  const fontFamily = (t.typography?.families ?? t.fonts ?? {}) as Record<string, any>;\n  const fontSize = (t.typography?.scale ?? t.fontSize ?? {}) as Record<string, any>;\n\n  const theme: TailwindTheme = {\n    colors: colors as any,\n    spacing: spacing as any,\n    borderRadius: borderRadius as any,\n    boxShadow: boxShadow as any,\n    fontFamily: fontFamily as any,\n    fontSize: fontSize as any,\n  };\n\n  return { theme };\n}\n","import type { Config as TailwindConfig } from \"tailwindcss\";\nimport type { SpectreTokens } from \"../tokens\";\nimport { createSpectreTailwindTheme } from \"./theme\";\n\ntype TailwindTheme = NonNullable<TailwindConfig[\"theme\"]>;\n\nexport interface CreateSpectreTailwindPresetOptions {\n  tokens: SpectreTokens;\n  themeOverrides?: TailwindTheme;\n  presetOverrides?: TailwindConfig;\n}\n\nconst isPlainObject = (value: unknown): value is Record<string, unknown> =>\n  typeof value === \"object\" && value !== null && !Array.isArray(value);\n\n// Deep-merge plain objects only; arrays and primitives replace by override.\nconst deepMerge = <T extends Record<string, unknown>>(\n  base: T,\n  overrides?: Record<string, unknown>\n): T => {\n  if (!overrides) return base;\n\n  const result: Record<string, unknown> = { ...base };\n\n  for (const [key, overrideValue] of Object.entries(overrides)) {\n    const baseValue = result[key];\n    if (isPlainObject(baseValue) && isPlainObject(overrideValue)) {\n      result[key] = deepMerge(baseValue, overrideValue);\n    } else {\n      result[key] = overrideValue;\n    }\n  }\n\n  return result as T;\n};\n\nexport const createSpectreTailwindPreset = (\n  options: CreateSpectreTailwindPresetOptions\n): TailwindConfig => {\n  if (!options.tokens) {\n    throw new Error(\n      \"[spectre-ui] createSpectreTailwindPreset requires tokens; pass { tokens } explicitly.\"\n    );\n  }\n  const { tokens } = options;\n  const { theme } = createSpectreTailwindTheme({ tokens });\n  const mergedTheme = deepMerge(\n    theme as Record<string, unknown>,\n    options.themeOverrides as Record<string, unknown> | undefined\n  );\n\n  const basePreset: TailwindConfig = {\n    content: [],\n    theme: mergedTheme, // theme is guaranteed non-undefined now\n  };\n\n  return deepMerge(\n    basePreset as Record<string, unknown>,\n    options.presetOverrides as Record<string, unknown> | undefined\n  ) as TailwindConfig;\n};\n"]}