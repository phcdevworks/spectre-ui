@layer components {
  :root {
    /* button roles */
    --sp-component-button-radius: var(--sp-radius-md, 0.75rem);
    --sp-component-button-font-weight: var(--sp-font-weight-semibold, 600);
    --sp-component-button-line-height: var(--sp-font-md-line-height, 1.5);

    --sp-component-button-padding-y-sm: var(--sp-space-2xs, 0.375rem);
    --sp-component-button-padding-x-sm: var(--sp-space-sm, 0.875rem);
    --sp-component-button-padding-y-md: var(--sp-space-xs, 0.5rem);
    --sp-component-button-padding-x-md: var(--sp-space-md, 1rem);
    --sp-component-button-padding-y-lg: var(--sp-space-sm, 0.875rem);
    --sp-component-button-padding-x-lg: var(--sp-space-lg, 1.25rem);

    --sp-component-button-gap: var(--sp-space-2xs, 0.375rem);
    --sp-component-button-border-width: 1px;

    /* primary */
    --sp-component-button-primary-bg: var(--sp-component-interactive-primary-bg-default);
    --sp-component-button-primary-bg-hover: var(--sp-component-interactive-primary-bg-hover);
    --sp-component-button-primary-bg-active: var(--sp-component-interactive-primary-bg-active);
    --sp-component-button-primary-bg-disabled: var(--sp-component-interactive-primary-bg-disabled);

    --sp-component-button-primary-text: var(--sp-component-interactive-primary-text-default);
    --sp-component-button-primary-text-disabled: var(--sp-component-interactive-primary-text-disabled);

    --sp-component-button-primary-border: var(--sp-component-interactive-primary-border-default);
    --sp-component-button-primary-border-hover: var(--sp-component-interactive-primary-border-hover);
    --sp-component-button-primary-border-active: var(--sp-component-interactive-primary-border-active);
    --sp-component-button-primary-border-disabled: var(--sp-component-interactive-primary-border-disabled);

    /* secondary */
    --sp-component-button-secondary-bg: var(--sp-component-interactive-secondary-bg-default);
    --sp-component-button-secondary-bg-hover: var(--sp-component-interactive-secondary-bg-hover);
    --sp-component-button-secondary-bg-active: var(--sp-component-interactive-secondary-bg-active);
    --sp-component-button-secondary-bg-disabled: var(--sp-component-interactive-secondary-bg-disabled);

    --sp-component-button-secondary-text: var(--sp-component-interactive-secondary-text-default);
    --sp-component-button-secondary-text-disabled: var(--sp-component-interactive-secondary-text-disabled);

    --sp-component-button-secondary-border: var(--sp-component-interactive-secondary-border-default);
    --sp-component-button-secondary-border-hover: var(--sp-component-interactive-secondary-border-hover);
    --sp-component-button-secondary-border-active: var(--sp-component-interactive-secondary-border-active);
    --sp-component-button-secondary-border-disabled: var(--sp-component-interactive-secondary-border-disabled);

    /* ghost */
    --sp-component-button-ghost-bg: var(--sp-component-interactive-ghost-bg-default);
    --sp-component-button-ghost-bg-hover: var(--sp-component-interactive-ghost-bg-hover);
    --sp-component-button-ghost-bg-active: var(--sp-component-interactive-ghost-bg-active);
    --sp-component-button-ghost-bg-disabled: var(--sp-component-interactive-ghost-bg-disabled);

    --sp-component-button-ghost-text: var(--sp-component-interactive-ghost-text-default);
    --sp-component-button-ghost-text-disabled: var(--sp-component-interactive-ghost-text-disabled);

    --sp-component-button-ghost-border: var(--sp-component-interactive-ghost-border-default);
    --sp-component-button-ghost-border-hover: var(--sp-component-interactive-ghost-border-hover);
    --sp-component-button-ghost-border-active: var(--sp-component-interactive-ghost-border-active);
    --sp-component-button-ghost-border-disabled: var(--sp-component-interactive-ghost-border-disabled);

    /* danger */
    --sp-component-button-danger-bg: var(--sp-component-interactive-danger-bg-default);
    --sp-component-button-danger-bg-hover: var(--sp-component-interactive-danger-bg-hover);
    --sp-component-button-danger-bg-active: var(--sp-component-interactive-danger-bg-active);
    --sp-component-button-danger-bg-disabled: var(--sp-component-interactive-danger-bg-disabled);

    --sp-component-button-danger-text: var(--sp-component-interactive-danger-text-default);
    --sp-component-button-danger-text-disabled: var(--sp-component-interactive-danger-text-disabled);

    --sp-component-button-danger-border: var(--sp-component-interactive-danger-border-default);
    --sp-component-button-danger-border-hover: var(--sp-component-interactive-danger-border-hover);
    --sp-component-button-danger-border-active: var(--sp-component-interactive-danger-border-active);
    --sp-component-button-danger-border-disabled: var(--sp-component-interactive-danger-border-disabled);

    /* success */
    --sp-component-button-success-bg: var(--sp-component-interactive-success-bg-default);
    --sp-component-button-success-bg-hover: var(--sp-component-interactive-success-bg-hover);
    --sp-component-button-success-bg-active: var(--sp-component-interactive-success-bg-active);
    --sp-component-button-success-bg-disabled: var(--sp-component-interactive-success-bg-disabled);

    --sp-component-button-success-text: var(--sp-component-interactive-success-text-default);
    --sp-component-button-success-text-disabled: var(--sp-component-interactive-success-text-disabled);

    --sp-component-button-success-border: var(--sp-component-interactive-success-border-default);
    --sp-component-button-success-border-hover: var(--sp-component-interactive-success-border-hover);
    --sp-component-button-success-border-active: var(--sp-component-interactive-success-border-active);
    --sp-component-button-success-border-disabled: var(--sp-component-interactive-success-border-disabled);

    /* input roles */
    --sp-component-input-radius: var(--sp-radius-md, 0.75rem);
    --sp-component-input-border-width: 1px;
    --sp-component-input-padding-y: var(--sp-space-xs, 0.5rem);
    --sp-component-input-padding-x: var(--sp-space-sm, 0.875rem);

    /* card roles */
    --sp-component-card-radius: var(--sp-radius-xl, 1.25rem);
    --sp-component-card-padding: var(--sp-space-xl, 2rem);
    --sp-component-card-border-width: 1px;

    --sp-component-card-bg-default: var(--sp-component-surface-card-default);
    --sp-component-card-bg-elevated: var(--sp-component-surface-card-elevated);
    --sp-component-card-bg-flat: var(--sp-component-surface-card-flat);
    --sp-component-card-bg-ghost: var(--sp-component-surface-card-ghost);

    --sp-component-card-border-default: var(--sp-component-border-card-default);
    --sp-component-card-border-ghost: var(--sp-component-border-card-ghost);

    --sp-component-card-shadow-elevated: var(--sp-component-shadow-card-elevated);

    --sp-component-card-text-default: var(--sp-component-text-card-default);
    --sp-component-card-text-muted: var(--sp-component-text-card-muted);

    /* badge roles */
    --sp-component-badge-radius: var(--sp-radius-full, 9999px);
    --sp-component-badge-font-weight: var(--sp-font-weight-semibold, 600);
    --sp-component-badge-line-height: 1;
    --sp-component-badge-padding-y-sm: var(--sp-space-3xs, 0.1875rem);
    --sp-component-badge-padding-x-sm: var(--sp-space-xs, 0.5rem);
    --sp-component-badge-padding-y-md: var(--sp-space-2xs, 0.375rem);
    --sp-component-badge-padding-x-md: var(--sp-space-sm, 0.875rem);
    --sp-component-badge-padding-y-lg: var(--sp-space-xs, 0.5rem);
    --sp-component-badge-padding-x-lg: var(--sp-space-md, 1rem);

    /* iconbox roles */
    --sp-component-iconbox-radius: var(--sp-radius-lg, 1rem);
    --sp-component-iconbox-size-sm: var(--sp-space-xl, 2rem);
    --sp-component-iconbox-size-md: var(--sp-space-2xl, 3rem);
    --sp-component-iconbox-size-lg: var(--sp-space-3xl, 4rem);
  }

  /* BUTTONS */
  .sp-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--sp-component-button-gap);
    border-radius: var(--sp-component-button-radius);
    border: var(--sp-component-button-border-width) solid transparent;
    font-weight: var(--sp-component-button-font-weight);
    line-height: var(--sp-component-button-line-height);
    cursor: pointer;
    user-select: none;
    text-decoration: none;
    white-space: nowrap;
    transition: background-color 120ms ease, border-color 120ms ease, color 120ms ease,
      box-shadow 120ms ease, transform 120ms ease, filter 120ms ease;
  }

  .sp-btn:focus-visible {
    outline: none;
    box-shadow: var(--sp-shadow-focus-ring, 0 0 0 3px rgba(110, 72, 255, 0.25));
  }

  .sp-btn--sm {
    padding: var(--sp-component-button-padding-y-sm) var(--sp-component-button-padding-x-sm);
    font-size: var(--sp-font-sm-size, 0.875rem);
  }

  .sp-btn--md {
    padding: var(--sp-component-button-padding-y-md) var(--sp-component-button-padding-x-md);
    font-size: var(--sp-font-md-size, 1rem);
  }

  .sp-btn--lg {
    padding: var(--sp-component-button-padding-y-lg) var(--sp-component-button-padding-x-lg);
    font-size: var(--sp-font-lg-size, 1.125rem);
  }

  .sp-btn--loading {
    opacity: 0.85;
    cursor: progress;
  }

  .sp-btn:disabled,
  .sp-btn[aria-disabled="true"] {
    cursor: not-allowed;
    opacity: 0.7;
  }

  /* Make forced hover classes actually visible even if tokens are subtle */
  .sp-btn--hover,
  .sp-btn.is-hover,
  .sp-btn:hover:not(:disabled):not([aria-disabled="true"]) {
    filter: brightness(0.98);
    transform: translateY(-1px);
  }

  .sp-btn:active:not(:disabled):not([aria-disabled="true"]),
  .sp-btn.is-active {
    transform: translateY(0);
    filter: brightness(0.97);
  }

  /* primary */
  .sp-btn--primary {
    background-color: var(--sp-component-button-primary-bg);
    color: var(--sp-component-button-primary-text);
    border-color: var(--sp-component-button-primary-border);
  }

  .sp-btn--primary.sp-btn--hover,
  .sp-btn--primary.is-hover,
  .sp-btn--primary:hover {
    background-color: var(--sp-component-button-primary-bg-hover);
    border-color: var(--sp-component-button-primary-border-hover);
  }

  .sp-btn--primary.sp-btn--active,
  .sp-btn--primary.is-active,
  .sp-btn--primary:active {
    background-color: var(--sp-component-button-primary-bg-active);
    border-color: var(--sp-component-button-primary-border-active);
  }

  .sp-btn--primary:disabled {
    background-color: var(--sp-component-button-primary-bg-disabled);
    color: var(--sp-component-button-primary-text-disabled);
    border-color: var(--sp-component-button-primary-border-disabled);
  }

  /* secondary */
  .sp-btn--secondary {
    background-color: var(--sp-component-button-secondary-bg);
    color: var(--sp-component-button-secondary-text);
    border-color: var(--sp-component-button-secondary-border);
  }

  .sp-btn--secondary.sp-btn--hover,
  .sp-btn--secondary.is-hover,
  .sp-btn--secondary:hover {
    background-color: var(--sp-component-button-secondary-bg-hover);
    border-color: var(--sp-component-button-secondary-border-hover);
  }

  .sp-btn--secondary.sp-btn--active,
  .sp-btn--secondary.is-active,
  .sp-btn--secondary:active {
    background-color: var(--sp-component-button-secondary-bg-active);
    border-color: var(--sp-component-button-secondary-border-active);
  }

  .sp-btn--secondary:disabled {
    background-color: var(--sp-component-button-secondary-bg-disabled);
    color: var(--sp-component-button-secondary-text-disabled);
    border-color: var(--sp-component-button-secondary-border-disabled);
  }

  /* ghost */
  .sp-btn--ghost {
    background-color: var(--sp-component-button-ghost-bg);
    color: var(--sp-component-button-ghost-text);
    border-color: var(--sp-component-button-ghost-border);
  }

  .sp-btn--ghost.sp-btn--hover,
  .sp-btn--ghost.is-hover,
  .sp-btn--ghost:hover {
    background-color: var(--sp-component-button-ghost-bg-hover);
    border-color: var(--sp-component-button-ghost-border-hover);
  }

  .sp-btn--ghost.sp-btn--active,
  .sp-btn--ghost.is-active,
  .sp-btn--ghost:active {
    background-color: var(--sp-component-button-ghost-bg-active);
    border-color: var(--sp-component-button-ghost-border-active);
  }

  .sp-btn--ghost:disabled {
    background-color: var(--sp-component-button-ghost-bg-disabled);
    color: var(--sp-component-button-ghost-text-disabled);
    border-color: var(--sp-component-button-ghost-border-disabled);
  }

  /* danger */
  .sp-btn--danger {
    background-color: var(--sp-component-button-danger-bg);
    color: var(--sp-component-button-danger-text);
    border-color: var(--sp-component-button-danger-border);
  }

  .sp-btn--danger.sp-btn--hover,
  .sp-btn--danger.is-hover,
  .sp-btn--danger:hover {
    background-color: var(--sp-component-button-danger-bg-hover);
    border-color: var(--sp-component-button-danger-border-hover);
  }

  .sp-btn--danger.sp-btn--active,
  .sp-btn--danger.is-active,
  .sp-btn--danger:active {
    background-color: var(--sp-component-button-danger-bg-active);
    border-color: var(--sp-component-button-danger-border-active);
  }

  .sp-btn--danger:disabled {
    background-color: var(--sp-component-button-danger-bg-disabled);
    color: var(--sp-component-button-danger-text-disabled);
    border-color: var(--sp-component-button-danger-border-disabled);
  }

  /* success */
  .sp-btn--success {
    background-color: var(--sp-component-button-success-bg);
    color: var(--sp-component-button-success-text);
    border-color: var(--sp-component-button-success-border);
  }

  .sp-btn--success.sp-btn--hover,
  .sp-btn--success.is-hover,
  .sp-btn--success:hover {
    background-color: var(--sp-component-button-success-bg-hover);
    border-color: var(--sp-component-button-success-border-hover);
  }

  .sp-btn--success.sp-btn--active,
  .sp-btn--success.is-active,
  .sp-btn--success:active {
    background-color: var(--sp-component-button-success-bg-active);
    border-color: var(--sp-component-button-success-border-active);
  }

  .sp-btn--success:disabled {
    background-color: var(--sp-component-button-success-bg-disabled);
    color: var(--sp-component-button-success-text-disabled);
    border-color: var(--sp-component-button-success-border-disabled);
  }

  /* INPUTS */
  .sp-input-wrapper {
    display: grid;
    gap: var(--sp-space-2xs, 0.375rem);
  }

  .sp-label {
    font-size: var(--sp-font-sm-size, 0.875rem);
    font-weight: var(--sp-font-weight-medium, 500);
    color: var(--sp-text-on-page-muted, rgba(29, 26, 20, 0.7));
  }

  .sp-input {
    width: 100%;
    padding: var(--sp-component-input-padding-y) var(--sp-component-input-padding-x);
    border-radius: var(--sp-component-input-radius);
    border: var(--sp-component-input-border-width) solid var(--sp-component-input-border-default, rgba(29, 26, 20, 0.18));
    background-color: var(--sp-component-input-bg-default, #ffffff);
    color: var(--sp-component-input-text-default, rgba(29, 26, 20, 0.92));
    font-size: var(--sp-font-md-size, 1rem);
    line-height: var(--sp-font-md-line-height, 1.5);
    transition: border-color 120ms ease, box-shadow 120ms ease, background-color 120ms ease, color 120ms ease;
  }

  .sp-input::placeholder {
    color: var(--sp-component-input-text-placeholder, rgba(29, 26, 20, 0.45));
  }

  .sp-input:focus {
    outline: none;
    border-color: var(--sp-component-input-border-focus, rgba(110, 72, 255, 0.6));
    box-shadow: var(--sp-component-input-shadow-focus, 0 0 0 3px rgba(110, 72, 255, 0.18));
  }

  .sp-input--focus {
    border-color: var(--sp-component-input-border-focus, rgba(110, 72, 255, 0.6));
    box-shadow: var(--sp-component-input-shadow-focus, 0 0 0 3px rgba(110, 72, 255, 0.18));
  }

  .sp-input--error {
    border-color: var(--sp-component-input-border-error, rgba(239, 68, 68, 0.75));
  }

  .sp-input--success {
    border-color: var(--sp-component-input-border-success, rgba(34, 197, 94, 0.75));
  }

  .sp-input--disabled,
  .sp-input:disabled {
    background-color: var(--sp-component-input-bg-disabled, rgba(29, 26, 20, 0.04));
    border-color: var(--sp-component-input-border-disabled, rgba(29, 26, 20, 0.12));
    color: var(--sp-component-input-text-disabled, rgba(29, 26, 20, 0.45));
    cursor: not-allowed;
  }

  .sp-input--disabled::placeholder,
  .sp-input:disabled::placeholder {
    color: var(--sp-component-input-text-disabled, rgba(29, 26, 20, 0.45));
  }

  .sp-input--disabled:focus,
  .sp-input--disabled:focus-visible,
  .sp-input--disabled:focus-within,
  .sp-input:disabled:focus,
  .sp-input:disabled:focus-visible {
    box-shadow: none;
  }

  .sp-helper-text {
    font-size: var(--sp-font-sm-size, 0.875rem);
    color: var(--sp-text-on-page-muted, rgba(29, 26, 20, 0.7));
  }

  .sp-error-message {
    font-size: var(--sp-font-sm-size, 0.875rem);
    color: var(--sp-text-danger, #c92a2a);
  }

  /* CARDS */
  .sp-card {
    background-color: var(--sp-component-card-bg-default);
    border-radius: var(--sp-component-card-radius);
    border: var(--sp-component-card-border-width) solid var(--sp-component-card-border-default);
    color: var(--sp-component-card-text-default);
    box-shadow: var(--sp-shadow-none);
  }

  .sp-card p {
    color: var(--sp-component-card-text-muted);
  }

  .sp-card .sp-text-muted {
    color: var(--sp-component-card-text-muted);
  }

  .sp-card h3,
  .sp-card h4 {
    margin: 0;
    color: var(--sp-component-card-text-default);
  }

  .sp-card--elevated {
    background-color: var(--sp-component-card-bg-elevated);
    box-shadow: var(--sp-component-card-shadow-elevated);
  }

  .sp-card--flat {
    background-color: var(--sp-component-card-bg-flat);
    box-shadow: var(--sp-shadow-none);
    border-color: var(--sp-component-card-border-default);
  }

  .sp-card--outline {
    background-color: var(--sp-component-card-bg-default);
    border-color: var(--sp-component-card-border-default);
    box-shadow: var(--sp-shadow-none);
  }

  .sp-card--ghost {
    background-color: var(--sp-component-card-bg-ghost);
    border-color: var(--sp-component-card-border-ghost);
    box-shadow: var(--sp-shadow-none);
  }

  .sp-card--padded {
    padding: var(--sp-component-card-padding);
  }

  .sp-card--full {
    width: 100%;
  }

  .sp-card--interactive {
    cursor: pointer;
    transition: box-shadow 120ms ease, transform 120ms ease, border-color 120ms ease;
  }

  .sp-card--interactive:hover,
  .sp-card--interactive:focus-visible,
  .sp-card--interactive:focus-within {
    box-shadow: var(--sp-component-card-shadow-elevated);
    transform: translateY(-1px);
  }

  /* ICONBOX (token-first: subtle surface + semantic text) */
  .sp-iconbox {
    --_iconbox-bg: var(--sp-surface-subtle, rgba(29, 26, 20, 0.06));
    --_iconbox-fg: var(--sp-text-on-page-default, rgba(29, 26, 20, 0.92));

    display: inline-flex;
    line-height: 0;
    align-items: center;
    justify-content: center;
    border-radius: var(--sp-component-iconbox-radius);

    background-color: var(--_iconbox-bg);
    color: var(--_iconbox-fg);
  }

  .sp-iconbox--sm {
    width: var(--sp-component-iconbox-size-sm, var(--sp-space-xl, 2rem));
    height: var(--sp-component-iconbox-size-sm, var(--sp-space-xl, 2rem));
    font-size: var(--sp-font-sm-size, 0.875rem);
    --sp-iconbox-icon-size: 1rem;
  }

  .sp-iconbox--md {
    width: var(--sp-component-iconbox-size-md, var(--sp-space-2xl, 3rem));
    height: var(--sp-component-iconbox-size-md, var(--sp-space-2xl, 3rem));
    font-size: var(--sp-font-md-size, 1rem);
    --sp-iconbox-icon-size: 1.25rem;
  }

  .sp-iconbox--lg {
    width: var(--sp-component-iconbox-size-lg, var(--sp-space-3xl, 4rem));
    height: var(--sp-component-iconbox-size-lg, var(--sp-space-3xl, 4rem));
    font-size: var(--sp-font-lg-size, 1.125rem);
    --sp-iconbox-icon-size: 1.5rem;
  }

  .sp-iconbox>svg,
  .sp-iconbox>i,
  .sp-iconbox>i>svg {
    width: var(--sp-iconbox-icon-size, 1em);
    height: var(--sp-iconbox-icon-size, 1em);
    display: block;
  }

  .sp-iconbox--primary {
    --_iconbox-bg: var(--sp-surface-primary-subtle, rgba(110, 72, 255, 0.12));
    --_iconbox-fg: var(--sp-text-primary, rgba(110, 72, 255, 1));
  }

  .sp-iconbox--success {
    --_iconbox-bg: var(--sp-surface-success-subtle, rgba(34, 197, 94, 0.14));
    --_iconbox-fg: var(--sp-text-success, #16a34a);
  }

  .sp-iconbox--warning {
    --_iconbox-bg: var(--sp-surface-warning-subtle, rgba(245, 158, 11, 0.16));
    --_iconbox-fg: var(--sp-text-warning, #b45309);
  }

  .sp-iconbox--danger {
    --_iconbox-bg: var(--sp-surface-danger-subtle, rgba(239, 68, 68, 0.14));
    --_iconbox-fg: var(--sp-text-danger, #dc2626);
  }

  .sp-iconbox--info {
    --_iconbox-bg: var(--sp-surface-info-subtle, rgba(59, 130, 246, 0.12));
    --_iconbox-fg: var(--sp-text-info, #2563eb);
  }

  /* BADGES (token-first: subtle surface + semantic text) */
  .sp-badge {
    --_badge-bg: var(--sp-surface-subtle, rgba(29, 26, 20, 0.06));
    --_badge-fg: var(--sp-text-on-page-default, rgba(29, 26, 20, 0.92));

    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--sp-component-badge-radius);
    font-weight: var(--sp-component-badge-font-weight);
    line-height: var(--sp-component-badge-line-height);
    white-space: nowrap;
    border: 1px solid transparent;

    background-color: var(--_badge-bg);
    color: var(--_badge-fg);
  }

  .sp-badge--sm {
    padding: var(--sp-component-badge-padding-y-sm) var(--sp-component-badge-padding-x-sm);
    font-size: var(--sp-font-xs-size, 0.75rem);
  }

  .sp-badge--md {
    padding: var(--sp-component-badge-padding-y-md) var(--sp-component-badge-padding-x-md);
    font-size: var(--sp-font-sm-size, 0.875rem);
  }

  .sp-badge--lg {
    padding: var(--sp-component-badge-padding-y-lg) var(--sp-component-badge-padding-x-lg);
    font-size: var(--sp-font-md-size, 1rem);
  }

  .sp-badge--primary {
    --_badge-bg: var(--sp-surface-primary-subtle, rgba(110, 72, 255, 0.12));
    --_badge-fg: var(--sp-text-primary, rgba(110, 72, 255, 1));
  }

  .sp-badge--success {
    --_badge-bg: var(--sp-surface-success-subtle, rgba(34, 197, 94, 0.14));
    --_badge-fg: var(--sp-text-success, #16a34a);
  }

  .sp-badge--warning {
    --_badge-bg: var(--sp-surface-warning-subtle, rgba(245, 158, 11, 0.16));
    --_badge-fg: var(--sp-text-warning, #b45309);
  }

  .sp-badge--danger {
    --_badge-bg: var(--sp-surface-danger-subtle, rgba(239, 68, 68, 0.14));
    --_badge-fg: var(--sp-text-danger, #dc2626);
  }
}
